// –ú–æ–∫-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (–∑–∞–º–µ–Ω—è—Ç API-–∑–∞–ø—Ä–æ—Å—ã)
function generateMockPlan(businessType, targetAudience) {
    const plans = {
        "–∫–∞—Ñ–µ": `üìÖ –ö–û–ù–¢–ï–ù–¢-–ü–õ–ê–ù –ù–ê –ú–ï–°–Ø–¶ - ${businessType.toUpperCase()}

–ù–ï–î–ï–õ–Ø 1:
‚Ä¢ –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫: –§–æ—Ç–æ —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∫–æ—Ñ–µ —Å –∫—Ä—É–∞—Å—Å–∞–Ω–æ–º
‚Ä¢ –í—Ç–æ—Ä–Ω–∏–∫: Stories: "–î–µ–Ω—å –≤ –∂–∏–∑–Ω–∏ –±–∞—Ä–∏—Å—Ç–∞"
‚Ä¢ –°—Ä–µ–¥–∞: –ü–æ—Å—Ç –ø—Ä–æ –Ω–æ–≤–æ–µ –±–ª—é–¥–æ –≤ –º–µ–Ω—é
‚Ä¢ –ß–µ—Ç–≤–µ—Ä–≥: –û–ø—Ä–æ—Å "–í–∞—à –ª—é–±–∏–º—ã–π –¥–µ—Å–µ—Ä—Ç?"
‚Ä¢ –ü—è—Ç–Ω–∏—Ü–∞: –§–æ—Ç–æ —É—é—Ç–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞ –∫–∞—Ñ–µ
‚Ä¢ –°—É–±–±–æ—Ç–∞: Reels: –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ª–∞—Ç—Ç–µ-–∞—Ä—Ç
‚Ä¢ –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –û—Ç–∑—ã–≤—ã –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

–ù–ï–î–ï–õ–Ø 2:
‚Ä¢ –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫: –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞–∫–∏
‚Ä¢ –í—Ç–æ—Ä–Ω–∏–∫: –ó–∞ –∫—É–ª–∏—Å–∞–º–∏: –∫–∞–∫ –≥–æ—Ç–æ–≤—è—Ç—Å—è –¥–µ—Å–µ—Ä—Ç—ã
‚Ä¢ –°—Ä–µ–¥–∞: –ü–æ—Å—Ç –ø—Ä–æ –∏—Å—Ç–æ—Ä–∏—é –∫–∞—Ñ–µ
‚Ä¢ –ß–µ—Ç–≤–µ—Ä–≥: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ "–£–≥–∞–¥–∞–π –∫–æ—Ñ–µ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é"
‚Ä¢ –ü—è—Ç–Ω–∏—Ü–∞: –§–æ—Ç–æ –∫–æ–º–∞–Ω–¥—ã —Å —Ä–∞—Å—Å–∫–∞–∑–æ–º –æ –∫–∞–∂–¥–æ–º
‚Ä¢ –°—É–±–±–æ—Ç–∞: –ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä —Å —à–µ—Ñ-–ø–æ–≤–∞—Ä–æ–º
‚Ä¢ –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: Carousel: —Ç–æ–ø-5 –Ω–∞–ø–∏—Ç–∫–æ–≤ —Å–µ–∑–æ–Ω–∞

–ù–ï–î–ï–õ–Ø 3-4: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–µ–º–∞—Ç–∏–∫–∏ —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —Å–µ–∑–æ–Ω–Ω—ã–µ –±–ª—é–¥–∞ –∏ —Å–æ–±—ã—Ç–∏—è...`,

        "–º–∞–≥–∞–∑–∏–Ω": `üìÖ –ö–û–ù–¢–ï–ù–¢-–ü–õ–ê–ù –ù–ê –ú–ï–°–Ø–¶ - ${businessType.toUpperCase()}

–ù–ï–î–ï–õ–Ø 1:
‚Ä¢ –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫: –ù–æ–≤—ã–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
‚Ä¢ –í—Ç–æ—Ä–Ω–∏–∫: –û–±–∑–æ—Ä —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π
‚Ä¢ –°—Ä–µ–¥–∞: –û—Ç–∑—ã–≤—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π —Å —Ñ–æ—Ç–æ
‚Ä¢ –ß–µ—Ç–≤–µ—Ä–≥: Stories: —Å–∫–∏–¥–∫–∏ –¥–Ω—è
‚Ä¢ –ü—è—Ç–Ω–∏—Ü–∞: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ "–¥–æ/–ø–æ—Å–ª–µ"
‚Ä¢ –°—É–±–±–æ—Ç–∞: –ö–æ–Ω–∫—É—Ä—Å —Å –ø—Ä–∏–∑–∞–º–∏
‚Ä¢ –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –õ–∞–π—Ñ—Ö–∞–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤

–ò —Ç–∞–∫ –¥–∞–ª–µ–µ...`,

        "default": `üìÖ –ö–û–ù–¢–ï–ù–¢-–ü–õ–ê–ù –ù–ê –ú–ï–°–Ø–¶ - ${businessType.toUpperCase()}

–ù–ï–î–ï–õ–Ø 1:
‚Ä¢ –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫: –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –±—Ä–µ–Ω–¥–æ–º/–∫–æ–º–∞–Ω–¥–æ–π
‚Ä¢ –í—Ç–æ—Ä–Ω–∏–∫: –ü–æ–∫–∞–∑ –ø—Ä–æ–¥—É–∫—Ç–∞/—É—Å–ª—É–≥–∏
‚Ä¢ –°—Ä–µ–¥–∞: –û—Ç–∑—ã–≤—ã –∏ –∫–µ–π—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
‚Ä¢ –ß–µ—Ç–≤–µ—Ä–≥: –ü–æ–ª–µ–∑–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ç–µ–º–µ
‚Ä¢ –ü—è—Ç–Ω–∏—Ü–∞: –ó–∞ –∫—É–ª–∏—Å–∞–º–∏ —Ä–∞–±–æ—Ç—ã
‚Ä¢ –°—É–±–±–æ—Ç–∞: –†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
‚Ä¢ –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –ò—Ç–æ–≥–∏ –Ω–µ–¥–µ–ª–∏

–ù–ï–î–ï–õ–Ø 2-4: –†–∞–∑–≤–∏—Ç–∏–µ —Ç–µ–º–∞—Ç–∏–∫ —Å —É—á–µ—Ç–æ–º –∞—É–¥–∏—Ç–æ—Ä–∏–∏ ${targetAudience}...`
    };

    const key = businessType.toLowerCase().includes('–∫–∞—Ñ–µ') ? '–∫–∞—Ñ–µ' : 
                businessType.toLowerCase().includes('–º–∞–≥–∞–∑–∏–Ω') ? '–º–∞–≥–∞–∑–∏–Ω' : 'default';
    
    return plans[key];
}

function generateMockHashtags(postText) {
    const hashtagGroups = {
        "–∫–∞—Ñ–µ": "#–∫–∞—Ñ–µ #coffee #–∑–∞–≤—Ç—Ä–∞–∫ #—É—é—Ç #barista #–ª–∞—Ç—Ç–µ #–¥–µ—Å–µ—Ä—Ç—ã #moscow #–∫–æ—Ñ–µ #–≤–∫—É—Å–Ω–æ",
        "–º–∞–≥–∞–∑–∏–Ω": "#–º–∞–≥–∞–∑–∏–Ω #shopping #—Å–∫–∏–¥–∫–∏ #–Ω–æ–≤–∏–Ω–∫–∏ #–∫–∞—á–µ—Å—Ç–≤–æ #–¥–æ—Å—Ç–∞–≤–∫–∞ #—Ç–æ–≤–∞—Ä—ã #–ø–æ–∫—É–ø–∫–∏ #sale #–æ–Ω–ª–∞–π–Ω",
        "–∫—Ä–∞—Å–æ—Ç–∞": "#–∫—Ä–∞—Å–æ—Ç–∞ #beauty #–º–∞–∫–∏—è–∂ #–∫–æ—Å–º–µ—Ç–∏–∫–∞ #—É—Ö–æ–¥ #—Å—Ç–∏–ª—å #–º–æ–¥–∞ #–±—å—é—Ç–∏ #skincare #makeup",
        "—Ñ–∏—Ç–Ω–µ—Å": "#—Ñ–∏—Ç–Ω–µ—Å #—Å–ø–æ—Ä—Ç #—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ #–∑–¥–æ—Ä–æ–≤—å–µ #—Ñ–∏—Ç–Ω–µ—Å–º–æ—Ç–∏–≤–∞—Ü–∏—è #–∑–æ–∂ #—Ç—Ä–µ–Ω–µ—Ä #—Å–ø–æ—Ä—Ç–∑–∞–ª #workout #fitness",
        "default": "#–±–∏–∑–Ω–µ—Å #–∫–∞—á–µ—Å—Ç–≤–æ #—Å–µ—Ä–≤–∏—Å #–∫–ª–∏–µ–Ω—Ç—ã #–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ #–Ω–∞–¥–µ–∂–Ω–æ #—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º #—Ç–æ–ø #–ª—É—á—à–∏–µ #–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ"
    };

    let selectedTags = hashtagGroups.default;
    
    for (let key in hashtagGroups) {
        if (postText.toLowerCase().includes(key)) {
            selectedTags = hashtagGroups[key];
            break;
        }
    }

    return `üè∑Ô∏è –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –•–ï–®–¢–ï–ì–ò:

–û—Å–Ω–æ–≤–Ω—ã–µ:
${selectedTags}

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ:
#–∫–æ–Ω—Ç–µ–Ω—Ç #smm #–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ #—Ä–µ–∫–ª–∞–º–∞ #–º–∞—Ä–∫–µ—Ç–∏–Ω–≥

üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 5-10 —Ö–µ—à—Ç–µ–≥–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ö–≤–∞—Ç–∞!`;
}

function generateMockAnalysis(profileUrl) {
    if (!profileUrl.includes('instagram.com')) {
        return "‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ Instagram";
    }

    return `üìä –ê–ù–ê–õ–ò–ó –ö–û–ù–ö–£–†–ï–ù–¢–ê

üë§ –ü—Ä–æ—Ñ–∏–ª—å: ${profileUrl}

üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚Ä¢ –ü–æ–¥–ø–∏—Å—á–∏–∫–∏: ~15,400
‚Ä¢ –ü–æ–¥–ø–∏—Å–∫–∏: 1,200  
‚Ä¢ –ü—É–±–ª–∏–∫–∞—Ü–∏–∏: 847

üìÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
‚Ä¢ –ü–æ—Å—Ç–æ–≤ –≤ –Ω–µ–¥–µ–ª—é: 4-6
‚Ä¢ –õ—É—á—à–µ–µ –≤—Ä–µ–º—è: 18:00-21:00
‚Ä¢ –°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å: –°—É–±–±–æ—Ç–∞

üéØ –ö–æ–Ω—Ç–µ–Ω—Ç-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è:
‚Ä¢ 40% - –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ —Ñ–æ—Ç–æ
‚Ä¢ 25% - lifestyle –∫–æ–Ω—Ç–µ–Ω—Ç  
‚Ä¢ 20% - –æ—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
‚Ä¢ 15% - –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Stories
2. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –≤–∏–¥–µ–æ-–∫–æ–Ω—Ç–µ–Ω—Ç–∞
3. –ß–∞—â–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã –∏ —á–µ–ª–ª–µ–Ω–¥–∂–∏

‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ê–Ω–∞–ª–∏–∑ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö`;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
async function generatePlan() {
    const businessType = document.getElementById('businessType').value.trim();
    const targetAudience = document.getElementById('targetAudience').value.trim();
    const resultDiv = document.getElementById('planResult');
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!businessType || !targetAudience) {
        resultDiv.innerHTML = '<div class="error">‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è</div>';
        return;
    }
    
    if (businessType.length > 100 || targetAudience.length > 100) {
        resultDiv.innerHTML = '<div class="error">‚ùå –¢–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π (–º–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤)</div>';
        return;
    }
    
    // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
    resultDiv.innerHTML = '<div class="loading">‚è≥ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω...</div>';
    
    // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
    setTimeout(() => {
        try {
            const plan = generateMockPlan(businessType, targetAudience);
            resultDiv.innerHTML = `<div class="success"><h3>üìÖ –í–∞—à –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω –≥–æ—Ç–æ–≤!</h3><pre>${plan}</pre></div>`;
        } catch (error) {
            resultDiv.innerHTML = '<div class="error">‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞</div>';
        }
    }, 1500);
}

async function generateHashtags() {
    const postText = document.getElementById('postText').value.trim();
    const resultDiv = document.getElementById('hashtagsResult');
    
    if (!postText) {
        resultDiv.innerHTML = '<div class="error">‚ùå –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞</div>';
        return;
    }
    
    if (postText.length > 500) {
        resultDiv.innerHTML = '<div class="error">‚ùå –¢–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π (–º–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–æ–≤)</div>';
        return;
    }
    
    resultDiv.innerHTML = '<div class="loading">‚è≥ –ü–æ–¥–±–∏—Ä–∞–µ–º —Ö–µ—à—Ç–µ–≥–∏...</div>';
    
    setTimeout(() => {
        try {
            const hashtags = generateMockHashtags(postText);
            resultDiv.innerHTML = `<div class="success">${hashtags}</div>`;
        } catch (error) {
            resultDiv.innerHTML = '<div class="error">‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–±–æ—Ä–∞ —Ö–µ—à—Ç–µ–≥–æ–≤</div>';
        }
    }, 1000);
}

async function analyzeCompetitor() {
    const profileUrl = document.getElementById('profileUrl').value.trim();
    const resultDiv = document.getElementById('analysisResult');
    
    if (!profileUrl) {
        resultDiv.innerHTML = '<div class="error">‚ùå –í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å</div>';
        return;
    }
    
    resultDiv.innerHTML = '<div class="loading">‚è≥ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞...</div>';
    
    setTimeout(() => {
        try {
            const analysis = generateMockAnalysis(profileUrl);
            resultDiv.innerHTML = `<div class="success"><pre>${analysis}</pre></div>`;
        } catch (error) {
            resultDiv.innerHTML = '<div class="error">‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ—Ñ–∏–ª—è</div>';
        }
    }, 2000);
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    console.log('SMM –ü–æ–º–æ—â–Ω–∏–∫ –∑–∞–≥—Ä—É–∂–µ–Ω');
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
    if (window.Telegram?.WebApp) {
        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand();
    }
});
